\hypertarget{PNTSON_8c}{}\section{P\+N\+T\+S\+O\+N.\+c File Reference}
\label{PNTSON_8c}\index{P\+N\+T\+S\+O\+N.\+c@{P\+N\+T\+S\+O\+N.\+c}}
{\ttfamily \#include \char`\"{}f2c.\+h\char`\"{}}\\*
Include dependency graph for P\+N\+T\+S\+O\+N.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=147pt]{PNTSON_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{PNTSON_8c_ab6b5f74c627390e18b741a4ec7a1dd75}{pntson\+\_\+} (doublereal $\ast$bin, doublereal $\ast$out, integer $\ast$ktyp, integer $\ast$ktws, integer $\ast$irr)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{P\+N\+T\+S\+O\+N.\+c@{P\+N\+T\+S\+O\+N.\+c}!pntson\+\_\+@{pntson\+\_\+}}
\index{pntson\+\_\+@{pntson\+\_\+}!P\+N\+T\+S\+O\+N.\+c@{P\+N\+T\+S\+O\+N.\+c}}
\subsubsection[{\texorpdfstring{pntson\+\_\+(doublereal $\ast$bin, doublereal $\ast$out, integer $\ast$ktyp, integer $\ast$ktws, integer $\ast$irr)}{pntson_(doublereal *bin, doublereal *out, integer *ktyp, integer *ktws, integer *irr)}}]{\setlength{\rightskip}{0pt plus 5cm}int pntson\+\_\+ (
\begin{DoxyParamCaption}
\item[{doublereal $\ast$}]{bin, }
\item[{doublereal $\ast$}]{out, }
\item[{integer $\ast$}]{ktyp, }
\item[{integer $\ast$}]{ktws, }
\item[{integer $\ast$}]{irr}
\end{DoxyParamCaption}
)}\hypertarget{PNTSON_8c_ab6b5f74c627390e18b741a4ec7a1dd75}{}\label{PNTSON_8c_ab6b5f74c627390e18b741a4ec7a1dd75}


Definition at line 18 of file P\+N\+T\+S\+O\+N.\+c.



References comptw\+\_\+(), curfit\+\_\+(), dp, dx, dy, f, i\+\_\+\+\_\+, ie, in, is, j, k, ll, n, one, px, temp, u, v, and w.



Referenced by apt107\+\_\+().


\begin{DoxyCode}
20 \{
21     \textcolor{comment}{/* Initialized data */}
22 
23     \textcolor{keyword}{static} integer nexch[16] = \{ 1,2,3,4,13,14,15,16,5,9,8,12,6,7,10,11 \};
24     \textcolor{keyword}{static} integer ip[4] = \{ 1,5,1,4 \};
25     \textcolor{keyword}{static} integer jp[4] = \{ 4,8,5,8 \};
26 
27     \textcolor{keyword}{static} integer \hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}, \hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}, \hyperlink{MOTION_8c_a13b230ea1d237595fb236c951a0849e0}{k}, \hyperlink{ACNTRL_8c_ad5228cd48403ef9d8b632f5c7c124720}{n};
28     \textcolor{keyword}{static} doublereal \hyperlink{APT088_8c_a1f9aca42e2010bb82488684dee1a66ea}{u}[4], \hyperlink{AERR2_8c_ab44777b30b9087bd3c98cfad93128179}{v}[4], \hyperlink{DDRLSR_8c_a6c6772207c061db8f6ca77c2661f497a}{w};
29     \textcolor{keyword}{static} integer \hyperlink{APT301_8c_ad0eaecf0bba0f19f301e8a5c5a772646}{ie};
30     \textcolor{keyword}{static} doublereal \hyperlink{AERR2_8c_ac9cf5c00c4344a26857d799d4733536d}{dp};
31     \textcolor{keyword}{static} integer \hyperlink{INIT_8c_a7cc019ad88e04ddd4d5ed8b80e8bd25d}{in}, \hyperlink{INTRP_8c_ae1d1ec9482079231e898236e2b23c9ba}{ll}, \hyperlink{APT331_8c_a9870e0caa2f8e3e5700c4cbb21d73c07}{is};
32     \textcolor{keyword}{static} doublereal \hyperlink{APT301_8c_ae1d0d606e7eb860732925d6dbb82f18a}{dx}, \hyperlink{APT301_8c_a1aa95347d299564b1d20a922f0d7eb97}{dy}, dz, \hyperlink{ACNTRL_8c_a8fbd5864c68da561728726a51fa7d197}{px}, py, pz, \hyperlink{APT298_8c_a7cf126dbeb6f30c606e3b42fea65cfef}{one}, bou[48] \textcolor{comment}{/* was [3][16]}
33 \textcolor{comment}{         */}, bxs, duv[4], bys, bzs, crit, \hyperlink{APT100_8c_a5905d48604152cf57aa6bfa087b49173}{temp}[12]  \textcolor{comment}{/* was [4][3] */};
34     \textcolor{keyword}{static} integer idiag;
35     \textcolor{keyword}{extern} \textcolor{comment}{/* Subroutine */} \textcolor{keywordtype}{int} \hyperlink{CURFIT_8c_ac94d036185355df0576434ab0dde7787}{curfit\_}(doublereal *, doublereal *, 
36         doublereal *, doublereal *, doublereal *, doublereal *, integer *,
37          integer *), \hyperlink{COMPTW_8c_ad4e49430030aa35df1d9c0c3467d5f5a}{comptw\_}(doublereal *, doublereal *, doublereal *, 
38         doublereal *, integer *);
39     \textcolor{keyword}{static} integer numtws;
40 
41     \textcolor{comment}{/* Parameter adjustments */}
42     --ktws;
43     --ktyp;
44     --out;
45     bin -= 4;
46 
47     \textcolor{comment}{/* Function Body */}
48 \textcolor{comment}{/* ------INPUT SIXTEEN POINTS ON A PATCH STORED IN THE ARRAY BIN. */}
49 \textcolor{comment}{/* ------OUTPUT  SIXTEEN COONS VECTORS OF A COONS PATCH WHICH PASSES */}
50 \textcolor{comment}{/* ------ THRU THE INPUT POINTS */}
51 \textcolor{comment}{/* ------ IN ADDITION, KTYP() CONTAINS INFORMATION ON SURFACE TYPE AND */}
52 \textcolor{comment}{/* ------KTYP=1=NULL CURVE, =2=STRAIGHT SEG, =3=3 PT CURVE, */}
53 \textcolor{comment}{/* ------KTYP=4= 4 PT CURVE, =10=ERROR ON CURVE */}
54 \textcolor{comment}{/* ------ SOURCES OF TROUBLE IN THE INPUT */}
55 \textcolor{comment}{/* ------ IRR .NE. 0 MEANS THE PROCESSING WAS UNSUCESSFUL */}
56 \textcolor{comment}{/* ------INITIALIZE VARIOUS VALUES */}
57     idiag = 5390;
58     *irr = 0;
59 \textcolor{comment}{/* ------ BEGIN BY ALTERING THE ORDER OF INPUT FROM SSX2 FORMAT TO THE */}
60 \textcolor{comment}{/* ------ OLD SSX1 FORMAT( THIS IS DONE TO SAVE REWORKING PNTSON) */}
61     \textcolor{keywordflow}{for} (j = 1; j <= 16; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
62     n = nexch[j - 1];
63     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 3; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
64         bou[i\_\_ + j * 3 - 4] = bin[i\_\_ + n * 3];
65 \textcolor{comment}{/* L5: */}
66     \}
67     \}
68     \textcolor{keywordflow}{for} (j = 1; j <= 16; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
69     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 3; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
70 \textcolor{comment}{/* L6: */}
71         bin[i\_\_ + j * 3] = bou[i\_\_ + j * 3 - 4];
72     \}
73     \}
74     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 5; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
75     ktws[\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}] = 0;
76 \textcolor{comment}{/* L1: */}
77     ktyp[\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}] = 0;
78     \}
79     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 16; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
80     \textcolor{keywordflow}{for} (j = 1; j <= 3; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
81         ktyp[3] = 2;
82         ktyp[4] = 2;
83 \textcolor{comment}{/* L2: */}
84         bou[j + i\_\_ * 3 - 4] = 0.f;
85     \}
86     \}
87     \textcolor{keywordflow}{for} (j = 1; j <= 3; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
88     bou[j - 1] = bin[j + 3];
89     bou[j + 2] = bin[j + 12];
90     bou[j + 11] = bin[j + 15];
91 \textcolor{comment}{/* L3: */}
92     bou[j + 14] = bin[j + 24];
93     \}
94     crit = 1e-5\hyperlink{APT102_8c_a7a51ed112e9b79f89e3e70beb8db8bf5}{f};
95 \textcolor{comment}{/* ------NEXT FIT THE FIRST TWO BOUNDARIES */}
96     \hyperlink{CURFIT_8c_ac94d036185355df0576434ab0dde7787}{curfit\_}(&bin[4], &bin[7], &bin[10], &bin[13], &bou[6], &bou[9], &ktyp[1], 
97         irr);
98     \textcolor{keywordflow}{if} (*irr != 0) \{
99     ktyp[1] = 10;
100     \}
101     \hyperlink{CURFIT_8c_ac94d036185355df0576434ab0dde7787}{curfit\_}(&bin[16], &bin[19], &bin[22], &bin[25], &bou[18], &bou[21], &ktyp[
102         2], irr);
103     \textcolor{keywordflow}{if} (*irr != 0) \{
104     ktyp[2] = 10;
105     \}
106 \textcolor{comment}{/* ------NEXT, CHECK FOR TOTAL EQUALITY AMONG THE EIGHT CENTRAL VECTORS */}
107 \textcolor{comment}{/* ------ SUCH EQUALITY IMPLIES THE SURFACE IS RULED */}
108     \textcolor{keywordflow}{for} (i\_\_ = 9; i\_\_ <= 15; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
109     n = i\_\_ + 1;
110     \textcolor{keywordflow}{for} (j = n; j <= 16; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
111         \textcolor{keywordflow}{for} (k = 1; k <= 3; ++\hyperlink{MOTION_8c_a13b230ea1d237595fb236c951a0849e0}{k}) \{
112         w = bin[k + j * 3] - bin[k + i\_\_ * 3];
113         \textcolor{keywordflow}{if} (abs(w) > crit) \{
114             \textcolor{keywordflow}{goto} L300;
115         \}
116 \textcolor{comment}{/* L20: */}
117         \}
118 \textcolor{comment}{/* L10: */}
119     \}
120     \}
121 \textcolor{comment}{/* ------ ALL EQUALITY CHECKS HAVE BEEN MET -- A RULED SURFACE FOLLOWS */}
122 \textcolor{comment}{/* ------DETERMINE THE REMAINING TANGENTS AND TWISTS */}
123     ktyp[5] = 1;
124     \textcolor{keywordflow}{for} (j = 1; j <= 3; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
125 \textcolor{comment}{/* ------SET UP THE CROSS TANGENTS FIRST */}
126     bou[j + 23] = bin[j + 15] - bin[j + 3];
127     bou[j + 35] = bou[j + 23];
128     bou[j + 26] = bin[j + 24] - bin[j + 12];
129     bou[j + 38] = bou[j + 26];
130 \textcolor{comment}{/* ------NOW SET UP TWIST VECTORS */}
131     bou[j + 29] = bou[j + 17] - bou[j + 5];
132     bou[j + 41] = bou[j + 29];
133     bou[j + 32] = bou[j + 20] - bou[j + 8];
134     bou[j + 44] = bou[j + 32];
135 \textcolor{comment}{/* L210: */}
136     \}
137 \textcolor{comment}{/* ------FINALLY RESET IRR */}
138     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 2; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
139 \textcolor{comment}{/* L220: */}
140     \textcolor{keywordflow}{if} (ktyp[i\_\_] == 10) \{
141         *irr = idiag + 1;
142     \}
143     \}
144     \textcolor{keywordflow}{goto} L999;
145 \textcolor{comment}{/* -----------   END OF RULED SURFACE PROCESSING   ------------- */}
146 L300:
147 \textcolor{comment}{/* ------NEXT COMPARE FOR TWO EQUAL CENTER POINTS */}
148     numtws = 4;
149     \textcolor{keywordflow}{for} (i\_\_ = 13; i\_\_ <= 15; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
150     n = i\_\_ + 1;
151     \textcolor{keywordflow}{for} (j = n; j <= 16; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
152         \textcolor{keywordflow}{for} (k = 1; k <= 3; ++\hyperlink{MOTION_8c_a13b230ea1d237595fb236c951a0849e0}{k}) \{
153         w = bin[k + j * 3] - bin[k + i\_\_ * 3];
154         \textcolor{keywordflow}{if} (abs(w) > crit) \{
155             \textcolor{keywordflow}{goto} L310;
156         \}
157 \textcolor{comment}{/* L320: */}
158         \}
159         numtws = 0;
160 L310:
161         ;
162     \}
163     \}
164 \textcolor{comment}{/* ------NUMTWS=0 MEANS ZERO TWISTS, .NE.0 MEANS NON ZERO TWISTS */}
165 \textcolor{comment}{/* ------NEXT CALL FOR A FIT OF THE REMAINING TWO BOUNDARIES */}
166     \hyperlink{CURFIT_8c_ac94d036185355df0576434ab0dde7787}{curfit\_}(&bin[4], &bin[28], &bin[31], &bin[16], &bou[24], &bou[36], &ktyp[
167         3], irr);
168     \textcolor{keywordflow}{if} (*irr != 0) \{
169     ktyp[3] = 10;
170     \}
171     \hyperlink{CURFIT_8c_ac94d036185355df0576434ab0dde7787}{curfit\_}(&bin[13], &bin[34], &bin[37], &bin[25], &bou[27], &bou[39], &ktyp[
172         4], irr);
173     \textcolor{keywordflow}{if} (*irr != 0) \{
174     ktyp[4] = 10;
175     \}
176 \textcolor{comment}{/* ------IF TWISTS HAVE YET TO BE DETERMINED GO TO 500 */}
177     \textcolor{keywordflow}{if} (numtws != 0) \{
178     \textcolor{keywordflow}{goto} L500;
179     \}
180 \textcolor{comment}{/* ------FINISH THE ZERO TWIST CASE BY RESETTING IRR */}
181     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 4; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
182 \textcolor{comment}{/* L410: */}
183     \textcolor{keywordflow}{if} (ktyp[i\_\_] == 10) \{
184         *irr = idiag + 2;
185     \}
186     \}
187     ktyp[5] = 2;
188     \textcolor{keywordflow}{goto} L999;
189 \textcolor{comment}{/* ------THE DETERMINATION OF FOUR TWISTS FOLLOWS */}
190 L500:
191 \textcolor{comment}{/* ------FIRST PROJECT EACH OF THE POINTS BIN(,I), I = 13,14,15,16 */}
192 \textcolor{comment}{/* ------IN SUCCESSION ONTO THE ZERO TWIST PATCH */}
193     one = 1.f;
194     \textcolor{keywordflow}{for} (i\_\_ = 13; i\_\_ <= 16; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
195     \textcolor{keywordflow}{for} (ll = 1; ll <= 4; ++\hyperlink{INTRP_8c_ae1d1ec9482079231e898236e2b23c9ba}{ll}) \{
196         is = ip[ll - 1];
197         ie = jp[ll - 1];
198         bxs = bin[is * 3 + 1];
199         bys = bin[is * 3 + 2];
200         bzs = bin[is * 3 + 3];
201         dx = bin[ie * 3 + 1] - bxs;
202         dy = bin[ie * 3 + 2] - bys;
203         dz = bin[ie * 3 + 3] - bzs;
204         px = bin[i\_\_ * 3 + 1] - bxs;
205         py = bin[i\_\_ * 3 + 2] - bys;
206         pz = bin[i\_\_ * 3 + 3] - bzs;
207         dp = dx * dx + dy * dy + dz * dz + 1e-30;
208         duv[ll - 1] = (px * dx + py * dy + pz * dz) / dp;
209 \textcolor{comment}{/* L550: */}
210     \}
211     u[i\_\_ - 13] = (duv[0] + duv[1]) / 2.f;
212     v[i\_\_ - 13] = (duv[2] + duv[3]) / 2.f;
213 \textcolor{comment}{/* L510: */}
214     \}
215 \textcolor{comment}{/* ------NOW RESET IRR IF TROUBLE HAS OCCURRED AND RETURN */}
216 \textcolor{comment}{/* ------KTWS HERE ALWAYS ZERO !!!!!!!!, WHY ???????????? */}
217     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 4; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
218 \textcolor{comment}{/* L520: */}
219     \textcolor{keywordflow}{if} (ktws[i\_\_] != 0) \{
220         *irr = idiag + 3;
221     \}
222     \}
223     \textcolor{keywordflow}{if} (*irr != 0) \{
224     \textcolor{keywordflow}{return} 0;
225     \}
226 \textcolor{comment}{/* ------FINALLY COMPUTE TWISTS BASED ON PARAMETER VALUES WHICH HAVE */}
227 \textcolor{comment}{/* ------ BEEN COMPUTED */}
228     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 4; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
229     \textcolor{keywordflow}{for} (k = 1; k <= 3; ++\hyperlink{MOTION_8c_a13b230ea1d237595fb236c951a0849e0}{k}) \{
230         n = i\_\_ + 12;
231 \textcolor{comment}{/* L530: */}
232         temp[i\_\_ + (k << 2) - 5] = bin[k + n * 3];
233     \}
234     \}
235 \textcolor{comment}{/*     WRITE(6,571)(U(M),M=1,4),(V(MM),MM=1,4),TEMP */}
236 \textcolor{comment}{/* 571 FORMAT(10X,4F15.4,/) */}
237     \hyperlink{COMPTW_8c_ad4e49430030aa35df1d9c0c3467d5f5a}{comptw\_}(bou, temp, u, v, irr);
238     ktyp[5] = 3;
239 L999:
240     \textcolor{keywordflow}{for} (i\_\_ = 1; i\_\_ <= 3; ++\hyperlink{APT088_8c_ae86436b0a8c8a69ba8ece7d58c8ed452}{i\_\_}) \{
241     \textcolor{keywordflow}{for} (k = 1; k <= 4; ++\hyperlink{MOTION_8c_a13b230ea1d237595fb236c951a0849e0}{k}) \{
242         \textcolor{keywordflow}{for} (j = 1; j <= 4; ++\hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j}) \{
243         in = (i\_\_ - 1 << 4) + (k - 1 << 2) + \hyperlink{PRO026_8c_aa8c84707b22bdc99b810d3c7d3ec5d52}{j};
244         out[\hyperlink{INIT_8c_a7cc019ad88e04ddd4d5ed8b80e8bd25d}{in}] = bou[i\_\_ + ((k << 2) - 4 + j) * 3 - 4];
245 \textcolor{comment}{/* L560: */}
246         \}
247     \}
248     \}
249     \textcolor{keywordflow}{return} 0;
250 \} \textcolor{comment}{/* pntson\_ */}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{PNTSON_8c_ab6b5f74c627390e18b741a4ec7a1dd75_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{PNTSON_8c_ab6b5f74c627390e18b741a4ec7a1dd75_icgraph}
\end{center}
\end{figure}


